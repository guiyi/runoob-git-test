<h2 id="introduction">Introduction</h2>
<p><em>A. Please read this manual carefully before power on the device.B. Do not use this device for military or medical purpose as they are not designed to.</em><a href="image:sdb_v2.2_1.png" title="wikilink">thumb</a>]This Sensor/Motor Drive Board (Cortex M3 CPU) is the integration of multiple communication interfaces that quickly build robotic systems. This board (Cortex M3 CPU) features the SPI Interface and works as a bridge between the whole system. There are many types of sensors on the board such as I2C bus communication protocol sensors, Ultrasonic sensors, SP03 TTS, CMP03 electronic compass, RS485-bus sensors, analog output sensors, infrared distance sensors, gyro sensors, acceleration sensors, and light sensors etc. The RS23 serial port is used to send signals to the host PC or other embedded systems. At the same time SDB plates with two-way DC motor-driven, two-way rotary encoder interface and a PID motor control algorithms which can be controlled through the serial port. The mounting hole structure is compatible with PC104.==Specification==*Supply Voltage：6V-12V, 15V maximum*Working Current：150mA @ 12V*Working Temperature ：-10～＋70℃*CPU: Cortex-M3 (90MIPS)，support DMA access*Interface：RS232/TTL at 9600、19200、38400 or115200 bps*8 Analog Input (12 bits)*11 Digital I/O Lines (IO0-IO7 can be configured for servo control)*Up to 8 servo with speed control*Support I2C,RS485,(CAN and SPI interfaces are not supported in V2.2)*Dual 4 Amp H-Bridge: Control 2 DC motors with A/B encoders interface. Integrated PID speed *control. Support odometer and motor current reading.*Size：96mmx90mmx20mm (compatible with PC104 mounting holes)*Weight：87g==Pin out diagram==<a href="image:sdb_v2.2_2.png" title="wikilink">thumb</a><a href="image:sdb_v2.2_3.png" title="wikilink">thumb</a>===Applying Power===<a href="image:sdb_v2.2_4.png" title="wikilink">thumbTo</a> power the SDB boards, simply connect the ground wire from your supply to the screw terminal labeled “GND”, and then connect the positive wire from your supply to the screw terminal labeled “+12V”.<em>NOTE: DO NOT apply voltage over 15V DC.</em><br /><br /><br />===Serial hardware configuration===<a href="image:sdb_v2.2_5.png" title="wikilink">thumbThe</a> SDB board supports RS232/TTL interface. The RS232/TTL output mode is selected by jumpers.<br /><br /><br />===Command Sets===*All commands are in Hex format. *All response is terminated by a 0x0A (Line Feed) at the end of the data.====Configure Servo Control Mode===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|I/O status|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x01|align=&quot;center&quot;|0x01|align=&quot;center&quot;|IO7~IO0|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />This command is used to configure the DIO to servo control mode. The I/O status byte is calculated from Bit0:Bit7 which is mapped on IO0-IO7. {|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot;|IO7|align=&quot;center&quot;|IO6|align=&quot;center&quot;|IO5|align=&quot;center&quot;|IO4|align=&quot;center&quot;|IO3|align=&quot;center&quot;|IO2|align=&quot;center&quot;|IO1|align=&quot;center&quot;|IO0|-|align=&quot;center&quot;|Bit7|align=&quot;center&quot;|Bit6|align=&quot;center&quot;|Bit5|align=&quot;center&quot;|Bit4|align=&quot;center&quot;|Bit3|align=&quot;center&quot;|Bit2|align=&quot;center&quot;|Bit1|align=&quot;center&quot;|Bit0|}<br /><br /><br /><br />When the IO Bit is set to 1, the servo mode is enabled. When IO bit is set to 0, the servo mode is disabled.<strong>Examples:</strong>:For example, to set IO3 and IO4 as servo mode, the bit table is as the following::I/O status = 0x18:{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot;|IO7|align=&quot;center&quot;|IO6|align=&quot;center&quot;|IO5|align=&quot;center&quot;|IO4|align=&quot;center&quot;|IO3|align=&quot;center&quot;|IO2|align=&quot;center&quot;|IO1|align=&quot;center&quot;|IO0|-|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|1|align=&quot;center&quot;|1|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|}<br /><br /><br /><br />:And the I/O status byte is 00011000 = 0x18.:<strong>Send:</strong>::0x55 0xaa 0x10 0x01 0x01 0x00 0x11 (Disable all servo control mode)::0x55 0xaa 0x10 0x01 0x01 0x01 0x12(Configure IO0 to Servo control mode)::0x55 0xaa 0x10 0x01 0x01 0x03 0x14(Configure IO0 and IO1 to Servo control mode)::0x55 0xaa 0x10 0x01 0x01 0x18 0x29(Configure IO3 and IO4 to Servo control mode)::0x55 0xaa 0x10 0x01 0x01 0x7F 0x91(Configure all DIO 0-7 to Servo control mode):<strong>Return:</strong>::None====Set DIO Input/output Mode===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|I/O status H|align=&quot;center&quot;|I/O status L|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x02|align=&quot;center&quot;|0x02|align=&quot;center&quot;|IO10~IO8|align=&quot;center&quot;|IO7~IO0|align=&quot;center&quot;|SUM|}<br /><br /><br /><br /><br />This command is used to set Digital Pin to input or output mode individually.I/O status L{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot;|IO7|align=&quot;center&quot;|IO6|align=&quot;center&quot;|IO5|align=&quot;center&quot;|IO4|align=&quot;center&quot;|IO3|align=&quot;center&quot;|IO2|align=&quot;center&quot;|IO1|align=&quot;center&quot;|IO0|-|align=&quot;center&quot;|Bit7|align=&quot;center&quot;|Bit6|align=&quot;center&quot;|Bit5|align=&quot;center&quot;|Bit4|align=&quot;center&quot;|Bit3|align=&quot;center&quot;|Bit2|align=&quot;center&quot;|Bit1|align=&quot;center&quot;|Bit0|}<br /><br /><br /><br />I/O status H{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|IO10|align=&quot;center&quot;|IO9|align=&quot;center&quot;|IO8|-|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|Bit2|align=&quot;center&quot;|Bit1|align=&quot;center&quot;|Bit0|}<br /><br /><br /><br /><em>NOTE: Before configure this DIO mode; the servo control mode must be disabled first. <strong><em>Example:<strong>:To set IO 1,2,9 as output, the rest IO as input. :I/O status L =0x06:{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot;|IO7|align=&quot;center&quot;|IO6|align=&quot;center&quot;|IO5|align=&quot;center&quot;|IO4|align=&quot;center&quot;|IO3|align=&quot;center&quot;|IO2|align=&quot;center&quot;|IO1|align=&quot;center&quot;|IO0|-|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|1|align=&quot;center&quot;|1|align=&quot;center&quot;|0|}<br /><br /><br /><br />:I/O status H =0x02:{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|IO10|align=&quot;center&quot;|IO9|align=&quot;center&quot;|IO8|-|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|0|align=&quot;center&quot;|1|align=&quot;center&quot;|0|}<br /><br /><br /><br />:Send:::0x55 0xAA 0x10 0x02 0x02 0x02 0x06 0x1B:Return:::NONE====Set DIO Output===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|I/O Value H|align=&quot;center&quot;|I/O Value L|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x02|align=&quot;center&quot;|0x03|align=&quot;center&quot;|IO10~IO8|align=&quot;center&quot;|IO7~IO0|align=&quot;center&quot;|SUM|}<br /><br /><br /><br /><br />I/O Value L{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot;|IO7|align=&quot;center&quot;|IO6|align=&quot;center&quot;|IO5|align=&quot;center&quot;|IO4|align=&quot;center&quot;|IO3|align=&quot;center&quot;|IO2|align=&quot;center&quot;|IO1|align=&quot;center&quot;|IO0|-|align=&quot;center&quot;|Bit7|align=&quot;center&quot;|Bit6|align=&quot;center&quot;|Bit5|align=&quot;center&quot;|Bit4|align=&quot;center&quot;|Bit3|align=&quot;center&quot;|Bit2|align=&quot;center&quot;|Bit1|align=&quot;center&quot;|Bit0|}<br /><br /><br /><br />I/O Value H{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|IO10|align=&quot;center&quot;|IO9|align=&quot;center&quot;|IO8|-|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|N/A|align=&quot;center&quot;|Bit2|align=&quot;center&quot;|Bit1|align=&quot;center&quot;|Bit0|}<br /><br /><br /><br />When the Bit is set to 1, the output is HIGH, When the Bit is set to 0, the output is LOW.''NOTE: If one of the DIO is configured as Digital Input Mode, the command to set its output will be invalid.</strong></em>Examples:</strong>:<strong>Send:</strong>::0x55 0xAA 0x10 0x01 0x01 0x00 0x11 (Disable servo control mode)::0x55 0xAA 0x10 0x02 0x02 0x00 0x00 0x13 (Configure IO0-10 as output mode)::0x55 0xAA 0x10 0x02 0x03 0x55 0x55 SUM (Set IO Output 0x55 0x55)::</em>Tips: It is encouraged to disable servo control mode before performing any operations on DIO'':<strong>Return:</strong>::None====Read DIO Input===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x00|align=&quot;center&quot;|0x04|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />This command reads the value on DIO when they are configured as Input Mode.Return Data：{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|High Byte|align=&quot;center&quot;|Low Byte|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x00|align=&quot;center&quot;|0x04|align=&quot;center&quot;|IO10~IO8|align=&quot;center&quot;|IO7~IO0|align=&quot;center&quot;|SUM|}<br /><br /><br /><br /><br /><strong>Example:</strong>:Send:::0x55 0xAA 0x10 0x01 0x01 0x00 0x11(Disable servo control mode)::0x55 0xAA 0x10 0x02 0x02 0xFF 0xFF 0x11(Configure IO0-10 as input mode)::0x55 0xAA 0x10 0x00 0x04 0x13(Read DIO Input):Return:::0x55 0xAA 0x10 0x02 0x04 0x07 0xFF 0x1B 0x0A====Servo Control===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|S0 Pos|align=&quot;center&quot;|S0 Speed|align=&quot;center&quot;|...|align=&quot;center&quot;|S10 Pos|align=&quot;center&quot;|S10 Speed|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x22|align=&quot;center&quot;|0x05|align=&quot;center&quot;|0xD0|align=&quot;center&quot;|0xS0|align=&quot;center&quot;|...|align=&quot;center&quot;|0xD10|align=&quot;center&quot;|0xS10|align=&quot;center&quot;|SUM|}<br /><br /><br /><br /><br />This command moves the servo at specific speeds.After configuring the DIO0-7 to Servo control mode, this command is used to play the Servo with position and speed control.&quot;S0 Pos&quot; is the position value of the servo. The value is from 0 to 180, and 90 is corresponding to the center position.&quot;S0 Speed&quot; is the speed value of the servo. The value is from 0 to 0xFF, and 0xFF stands for the highest speed.<strong>Examples:</strong>:<strong>Send:</strong>::Enable servo control mode ::0x55 0xAA 0x10 0x01 0x01 0xff 0x10::Move Servo 0 and 1 to the center position at maximum speed, move Servo 2-5 with incremental position at maximum speed::0x55 0xAA 0x10 0x10 0x05 0x5a 0xFF 0x5a 0xFF 0x20 0xFF 0x30 0xFF 0x40 0xFF 0x50 0xFF 0x60 0xFF 0x70 0xFF 0x7E:<strong>Return:</strong>::None====Read Analog Input (12 bits)===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x00|align=&quot;center&quot;|0x06|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />This command reads the values on analog pins.Returns：{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|AD0H|align=&quot;center&quot;|AD0L|align=&quot;center&quot;|...|align=&quot;center&quot;|AD7H|align=&quot;center&quot;|AD7L|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x16|align=&quot;center&quot;|0x06|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|...|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />The returned analog value consists of two bytes HIGH and LOW. 0xFF is mapping to 3.3V and 0x00 is mapping to 0V. ''NOTE: If the analog input exceeds 3.36V, the returned data may not be correct. <strong>''Example:</strong>:Send:::Read Analog Input::0x55 0x AA 0x 10 0x 00 0x 06 0x 15:Return:::0x55 0xAA 0x10 0x10 0x06 0x05 0x1B 0x07 0x78 0x08 0x7F 0x07 0xE0 0x08 0xAF 0x07 0xFA 0x09 0xED 0x0D 0x24 0x11 0x0A====Configure RS485 Baud Rate===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|Baud Rate|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x01|align=&quot;center&quot;|0x07|align=&quot;center&quot;|Baud|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />This commands set the baud rate for RS485 Bus.Baud Rate:*0x00：2400 bps *0x01：9600 bps *0x02：19200 bps *0x03：38400 bps *0x04：115200 bps<strong>Example:</strong>:Send:::Set RS485 Baud rate to 115200bps::0x55 0xaa 0x10 0x01 0x07 0x04 0x1B :Return:::None====RS485 Communication====Send:{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|Data 0|align=&quot;center&quot;|...|align=&quot;center&quot;|Data n|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|N|align=&quot;center&quot;|0x08|align=&quot;center&quot;|Data 0|align=&quot;center&quot;|...|align=&quot;center&quot;|Data n|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />This command transmits the data via RS485 BUS from RS232/TTL. The length of data must not exceed 64.Response:{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|Data 0|align=&quot;center&quot;|...|align=&quot;center&quot;|Data n|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|9xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|N|align=&quot;center&quot;|0x08|align=&quot;center&quot;|Data 0|align=&quot;center&quot;|...|align=&quot;center&quot;|Data n|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />The response data is transmitted to RS232/TTL.<strong>Example:</strong>:Send:::Trigger URM04 ultrasonic sensor (Device address 0x11)::0x55 0xaa 0x10 0x06 0x08 0x55 0xaa 0x11 0x00 0x01 0x11 0x3f :Return:::None:Send:::Read URM04 data (For more detail of this command, refer URM04 manual)::0x55 0xaa 0x10 0x06 0x08 0x55 0xaa 0x11 0x00 0x02 0x12 0x41:Return:::0x55 0xAA 0x10 0x08 0x08 0x55 0xAA 0x11 0x02 0x02 0x00 0x09 0x1D 0x59 0x0A::0x00 0x09 is the return distance data which is 9 cm.====Write Data via I2C===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|Device Add|align=&quot;center&quot;|Start Add|align=&quot;center&quot;|Data 0|align=&quot;center&quot;|...|align=&quot;center&quot;|Data n|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|N|align=&quot;center&quot;|0x09|align=&quot;center&quot;|Deviceaddr|align=&quot;center&quot;|StartAddr|align=&quot;center&quot;|Data0|align=&quot;center&quot;|...|align=&quot;center&quot;|Data n|align=&quot;center&quot;|SUM|}<br /><br /><br /><br /><br /><br />This command writes data to device via I2C. The total data length must be less than 64 bytes.====Read Data via I2C===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|Address|align=&quot;center&quot;|Start Add|align=&quot;center&quot;|Data Length|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x03|align=&quot;center&quot;|0x0A|align=&quot;center&quot;|Deviceaddr|align=&quot;center&quot;|StartAddr|align=&quot;center&quot;|Len|align=&quot;center&quot;|SUM|}<br /><br /><br /><br /><br />This command reads data from device via I2C. The total data length is less than 4 bytes.<strong>Example:</strong>:Read:::Trigger SRF02 Ultrasonic sensor reading (Device Address:0xE0)::0x55 0xaa 0x10 0x03 0x09 0xE0 0x00 0x51 0x4C::Read SRF02 Data (more detail, please refer to SRF02 Manual)::0x55 0xaa 0x10 0x03 0x0A 0xE0 0x02 0x02 0x00:Return:::0x55 0xAA 0x10 0x04 0x0A 0xE0 0x02 0x00 0xAC 0xAB 0x0A ::(0x00 0xAC is the return distance which is 172 cm):Read:::Read CMPS03Compass data (Device Address:0xc0)::0x55 0xaa 0x10 0x03 0x0a 0xc0 0x01 0x01 0xde::Read HMC6343 Compass data (Device Address:0x32)::0x55 0xaa 0x10 0x03 0x0a 0x32 0x50 0x06 0xa4:Return:::0x55 0xAA 0x10 0x08 0x0A 0x32 0x50 0x00 0x08 0xFF 0xF0 0xFF 0xFB 0x94 0x0A====Set Motor Parameters===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot; colspan=2|ENCODER_PPR|align=&quot;center&quot; colspan=2|GearRatio|align=&quot;center&quot; colspan=2|WheelPerimeter|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x06|align=&quot;center&quot;|0x0B|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />This commands set the parameters for DC motor speed control.ENCODER_PPR: The pulse per rotation of encoder. (Default value 12)GearRatio: Gear ratio. For a 64:0 gear ratio, the value should be 640(0x02 0x80). (Default value 640)WheelPerimeter : The perimeter and the wheel (Default value 502 mm)====Set Motor Speed===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot; colspan=2|M1_SPEED|align=&quot;center&quot; colspan=2|M2_SPEED|align=&quot;center&quot; colspan=2|MOTO_DIR|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x05|align=&quot;center&quot;|0x0C|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|DIR|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />This commands set the speed of motor.*M1_SPEED/M2_SPEED consists of two bytes (HIGH and LOW). For a 132 cm/s speed, the M1_SPEED will be 0x00 0x84.*MOTO_DIR is direction control. The low 4 bits of the byte is for the direction of Motor 1. The high 4 bits of the byte is for the direction of Motor 2. {|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=4|Motor 2|align=&quot;center&quot; colspan=4|Motor 1|-|align=&quot;center&quot;|Bit7|align=&quot;center&quot;|Bit6|align=&quot;center&quot;|Bit5|align=&quot;center&quot;|Bit4|align=&quot;center&quot;|Bit3|align=&quot;center&quot;|Bit2|align=&quot;center&quot;|Bit1|align=&quot;center&quot;|Bit0|-|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|}<br /><br /><br /><br /><br />0 is forward, F is backward. For example, to set Motor 1 move forward while set Motor 2 move backward. The MOTO_DIR will be look like:{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=4|Motor 2|align=&quot;center&quot; colspan=4|Motor 1|-|align=&quot;center&quot;|Bit7|align=&quot;center&quot;|Bit6|align=&quot;center&quot;|Bit5|align=&quot;center&quot;|Bit4|align=&quot;center&quot;|Bit3|align=&quot;center&quot;|Bit2|align=&quot;center&quot;|Bit1|align=&quot;center&quot;|Bit0|-|align=&quot;center&quot;|1|align=&quot;center&quot;|1|align=&quot;center&quot;|1|align=&quot;center&quot;|1|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|align=&quot;center&quot;|0|}<br /><br /><br /><br /><br /><br />The actual value of the MOTO_DIR will be 0xF0.<strong>Example:</strong>:Send:::Set motor speed at 4cm/s (Forward)::0x55 0xaa 0x10 0x05 0x0C 0x00 0x04 0x00 0x04 0x00 0x28::Set motor speed at 4cm/s (Backward)::0x55 0xaa 0x10 0x05 0x0C 0x00 0x04 0x00 0x04 0xFF 0x27:Return:::None====Read Motor Speed===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x00|align=&quot;center&quot;|0x0D|align=&quot;center&quot;|0x1C|}<br /><br /><br /><br />Return：{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot; colspan=2|M1_PV_CPS|align=&quot;center&quot; colspan=2|M2_PV_CPS|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x04|align=&quot;center&quot;|0x0D|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />====Read Motor Current===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x00|align=&quot;center&quot;|0x0E|align=&quot;center&quot;|0x1D|}<br /><br /><br /><br />This command reads the motor current. Return：{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot; colspan=2|M1_Curent|align=&quot;center&quot; colspan=2|M2_Curent|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x04|align=&quot;center&quot;|0x0E|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />The current value is 16 bit which consists of two bytes (HIGH and LOW). The current unit is mA.====Set PID Parameters===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|P|align=&quot;center&quot;|I|align=&quot;center&quot;|D|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x03|align=&quot;center&quot;|0x0F|align=&quot;center&quot;|Kprop|align=&quot;center&quot;|Krate|align=&quot;center&quot;|Kint|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />Kprop: Proportional gainKrate: Derivative gainKint : Integral gain''NOTE: The gain value must multiple by 10. For example, if the actual K is 0.1, then the Kprop must be 0.1x10 which 1(0x01). ''====Set Motor Driven Mode===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|Drive Mode|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x01|align=&quot;center&quot;|0x10|align=&quot;center&quot;|Mode|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />This command sets the motor driven mode.Mode::Value: 0X00:PID speed control. This is a close loop control method. The parameters for the motors must be :set for proper speed control.:Value: 0X11:Direct power control. This is an open loop control method; the parameters do not affect the motors.<strong>Example:</strong>:Send:::Set the motor driven mode to direct power control mode::0x55 0xAA 0x10 0x01 0x10 0x11 0x31::Set the motors move forward at 4% power::0x55 0xaa 0x10 0x05 0x0C 0x00 0x04 0x00 0x04 0x00 0x28:Return:::None====Set Motor Power===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|Motor 1 Power Ratio|align=&quot;center&quot;|Motor 2 Power Ratio|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x02|align=&quot;center&quot;|0x11|align=&quot;center&quot;|S1|align=&quot;center&quot;|S2|align=&quot;center&quot;|SUM|}<br /><br /><br /><br /><br /><br />This commands set the power of the motors. The value of power ratio S1/S2 is from 0-200. 100(0x64) stands for a full stop. 200(0xC8) stands for the maximum forward power. 0(0x00) stands for the maximum backward power.====Read encoder data===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x00|align=&quot;center&quot;|0x12|align=&quot;center&quot;|0x21|}<br /><br /><br /><br />Return:{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot; colspan=2|M1_ENCODE|align=&quot;center&quot; colspan=2|M2_ENCODE|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x04|align=&quot;center&quot;|0x12|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|H|align=&quot;center&quot;|L|align=&quot;center&quot;|SUM|}<br /><br /><br /><br />M1_ENCODE、M2_ENCODE：Two bytes 16 bit value。Represent the rotation counter of the motors.When change the direction of the motor, the encoder needs to be reset.<strong>Example：</strong>:<strong>Send:</strong>::Read encoders::0x55 0xaa 0x10 0x00 0x12 0x21:<strong>Return:</strong>::0x55 0xAA 0x10 0x04 0x12 0x00 0x3C 0x03 0x53 0xB7 0x0A====Reset Encoder Reading===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x00|align=&quot;center&quot;|0x13|align=&quot;center&quot;|0x22|}<br /><br /><br /><br />This commands reset the encoder’s counters.<strong>Example</strong>:<strong>Send:</strong>::Reset the encoder’s counters::0x55 0xAA 0x10 0x00 0x13 0x22:<strong>Return:</strong>::None====Read Board Version===={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x00|align=&quot;center&quot;|0xFF|align=&quot;center&quot;|0x0E|}<br /><br /><br /><br />This command reads the board version.Return Data:{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|-|align=&quot;center&quot; colspan=2|Header|align=&quot;center&quot;|Add|align=&quot;center&quot;|Length|align=&quot;center&quot;|Cmd|align=&quot;center&quot;|Board Code|align=&quot;center&quot;|Version|align=&quot;center&quot;|Revision|align=&quot;center&quot;|SUM|-|align=&quot;center&quot;|0x55|align=&quot;center&quot;|0xaa|align=&quot;center&quot;|0x10|align=&quot;center&quot;|0x03|align=&quot;center&quot;|0xFF|align=&quot;center&quot;|0x01|align=&quot;center&quot;|V1|align=&quot;center&quot;|V2|align=&quot;center&quot;|SUM|}<br /><br /><br /><br /><br />Board Code: 0x01 (SDB Board)Version: Board main versionRevision: Board revision<strong>Example</strong>:<strong>Send:</strong>::0x55 0xaa 0x10 0x00 0xff 0x0e:<strong>Return:</strong>::0x55 0xAA 0x10 0x03 0xFF 0x010x02 0x02 0x16 0x0A{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;!style=&quot;background:#7dc2f5&quot;|Version!style=&quot;background:#7dc2f5&quot;|Date!style=&quot;background:#7dc2f5&quot;|Author!style=&quot;background:#7dc2f5&quot;|Content|-|align=&quot;center&quot;|0.1|align=&quot;center&quot;|2010/4/25|align=&quot;center&quot;|Chen|align=&quot;center&quot;|Create Document|-|align=&quot;center&quot;|1.0|align=&quot;center&quot;|2010/6/1|align=&quot;center&quot;|Chen|align=&quot;center&quot;|First Version Released|}<br /><br /><br /><br /><br /><a href="image:nextredirectltr.png" title="wikilink">image:nextredirectltr.pngGo</a> Shopping <a href="https://www.dfrobot.com/product-99.html">Sensor/Motor Drive Board - Version 2.2 (SKU:DFR0057)</a>Category: <a href="https://www.dfrobot.com/">DFRobot</a> &gt; <a href="https://www.dfrobot.com/category-35.html">Arduino</a> &gt; <a href="https://www.dfrobot.com/category-240.html">Microcontrollers</a><a href="category:_Product_Manual" title="wikilink">category: Product Manual</a><a href="category:_DFR_Series" title="wikilink">category: DFR Series</a><a href="category:_Motor_Controllers" title="wikilink">category: Motor Controllers</a></p>---
title: Sensor Motor Drive Board - Version 2.2 (SKU:DFR0057)
permalink: /Sensor/Motor_Drive_Board_-_Version_2.2_(SKU:DFR0057)/
---

