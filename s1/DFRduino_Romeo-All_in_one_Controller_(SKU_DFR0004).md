<p><em><strong>This wiki is for Romeo V1, please see the following link for Romeo V1.1:</strong></em><a href="DFRduino_Romeo-All_in_one_Controller_V1.1(SKU:DFR0004)" title="wikilink">DFRduino Romeo-All in one Controller V1.1(SKU:DFR0004)A</a>. Please read this manual carefully before applying power on the device.<br />B. Do not use this device for military or medical purpose as they are not designed to.==Introduction==<a href="image:DFRduino_RoMeo1.png" title="wikilink">thumbRoMeo</a> is an All-in-One microcontroller especially designed for robotics application. Benefit from Arduino open source platform, it is supported by thousands of open source codes, and can be easily expanded with most Arduino Shields. The integrated 2 way DC motor driver and wireless socket gives a much easier way to start your robotic project.==Specification==*Atmega 168/328*14 Channels Digital I/O*6 PWM Channels (Pin11,Pin10,Pin9,Pin6,Pin5,Pin3)*8 Channels 10-bit Analog I/O *USB interface*Auto sensing/switching power input*ICSP header for direct program download*Serial Interface TTL Level*Support AREF*Support Male and Female Pin Header*Integrated sockets for APC220 RF Module and DF-Bluetooth Module*Five I2C Interface Pin Sets*Two way Motor Drive with 2A maximum current *7 key inputs*DC Supply：USB Powered or External 7V~12V DC。*DC Output：5V /3.3V DC and External Power Output*Dimension：90x80mm==DFRduino RoMeo Pinout==<a href="image:DFRduino_RoMeo2.png" title="wikilink">thumbThe</a> picture above shows all of the I/O lines and Connectors on the Romeo, which includes: *One Regulated Motor Power Input Terminal (6v to12v) *One Unregulated Servo Power Input Terminal (you supply regulated 4v to 7.2v) *One Servo input power selection jumper *One Serial Interface Module Header for APC220/Bluetooth Module*Two DC Motor Terminals – Handles motor current draw up to 2A, each terminal *One I2C/TWI Port – SDA, SCL, 5V, GND *One Analog Port with 8 analog inputs – one input is tied internally to the supply voltage *One General Purpose I/O Port with 13 I/O lines – 4,5,6,7 can be used to control motors *One Reset Button *Jumper bank to Enable/Disable Motor Control==Before you start======Applying Power====This is one of the most important steps in getting the Romeo up and communicating with your host controller. You MUST make sure that you apply power to the Power Terminal using the correct polarity. Reverse Polarity will damage the Romeo. <em>We are not responsible for such damage, nor do we warranty against such damage.</em> Make sure you take time to apply power correctly. Otherwise, it could get costly for you!<strong>Power from USB:</strong>Simply plug USB cable, and the Romeo is able to work. Please notice that the USB can only supply 500 mA current. It should be able to meet the most requirements for LED lit application. However it is not enough to power DC motors or servo.<strong>Power from Motor Power Input:</strong>Simply connect the ground wire from your supply to the screw terminal labeled “GND”, and then connect the positive wire from your supply to the screw terminal labeled “VIN&quot;. <em>NOTE: Maximum supply voltage cannot exceed 14V DC.</em>====Software====RoMeo can be programmed by Arduino IDE 0014 and above version.It can be downloaded at <a href="http://arduino.cc/en/Main/Software">http://arduino.cc/en/Main/Software</a>, Please select “Arduino Duemilanove w/ATMega328” as the hardware.==Romeo Configuration======Servo Power Select Jumper====As most servo draw more current than the USB power source can supply. A separate servo power terminal is provided to power the servo individually which can be Enable/Disable by the Servo Power Select Jumper. When the Servo Power Select Jumper is applied, the servo is powered by internal 5V. When the Servo Power Select Jumper is not applied, the servo is powered by external power source.The Romeo V1.0 uses an automatic switcher for the power source selection. When the external power source has been applied, the servo will be automatically powered by the external power instead of USB power.====Motor Control Pin Jumper====Applying the Motor Control Pin Jumpers will allocate Pin 5,6,7,8 for motor control. Removing the jumpers will release the above Pins.====Wireless Select Jumper====Applying the Wireless Select Jumper will allow the Romeo communicate via its wireless module such as APC220 and DF-Bluetooth module. If no wireless module is plugged, this jumper does not make any difference. Removing the jumper will disable wireless module and allows the sketch to be uploaded.==Tutorial======Button Press ====RoMeo has 7 build in buttons S1-S7 (Figure 2). S1-S5 use analog input 7, S6,S7 use digital input 2 and 3. {|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;center&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|+ &quot;Button Pin Map&quot;!style=&quot;background:#7dc2f5&quot;|Pin!style=&quot;background:#7dc2f5&quot;|Function|-|align=&quot;center&quot;|Digital Pin 2|align=&quot;center&quot;|Button S6|-|align=&quot;center&quot;|Digital Pin 3|align=&quot;center&quot;|Button S7|-|align=&quot;center&quot;|Analog Pin 7|align=&quot;center&quot;|Button S1-S5|}<a href="image:DFRduino_RoMeo3.png" title="wikilink">thumb</a>===Example use of Button 1-5===</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">char</span> msgs[<span class="dv">5</span>][<span class="dv">15</span>] = {  <span class="st">&quot;Right Key OK &quot;</span>,   <span class="st">&quot;Up Key OK    &quot;</span>,   <span class="st">&quot;Down Key OK  &quot;</span>,   <span class="st">&quot;Left Key OK  &quot;</span>,   <span class="st">&quot;Select Key OK&quot;</span> };<span class="dt">char</span> start_msg[<span class="dv">15</span>] = {  <span class="st">&quot;Start loop &quot;</span>};                    <span class="dt">int</span>  adc_key_val[<span class="dv">5</span>] ={  <span class="dv">30</span>, <span class="dv">150</span>, <span class="dv">360</span>, <span class="dv">535</span>, <span class="dv">760</span> };<span class="dt">int</span> NUM_KEYS = <span class="dv">5</span>;<span class="dt">int</span> adc_key_in;<span class="dt">int</span> key=-<span class="dv">1</span>;<span class="dt">int</span> oldkey=-<span class="dv">1</span>;<span class="dt">void</span> setup() {   pinMode(<span class="dv">13</span>, OUTPUT);  <span class="co">//we&#39;ll use the debug LED to output a heartbeat  Serial.begin(9600);  /* Print that we made it here */  Serial.println(start_msg); }void loop() {  adc_key_in = analogRead(7);    // read the value from the sensor    digitalWrite(13, HIGH);  /* get the key */  key = get_key(adc_key_in);    // convert into key press  if (key != oldkey) {   // if keypress is detected    delay(50);      // wait for debounce time    adc_key_in = analogRead(7);    // read the value from the sensor      key = get_key(adc_key_in);    // convert into key press    if (key != oldkey) {               oldkey = key;      if (key &gt;=0){        Serial.println(adc_key_in, DEC);        Serial.println(msgs[key]);      }    }  }  digitalWrite(13, LOW);}// Convert ADC value to key numberint get_key(unsigned int input){     int k;  for (k = 0; k &lt; NUM_KEYS; k++)  {    if (input &lt; adc_key_val[k])    {        return k;      }  }  if (k &gt;= NUM_KEYS)    k = -1;     // No valid key pressed  return k;}</span></code></pre>
<p>To enable S6 and S7, please apply the jumpers indicated in the red circle. S6 uses Digital Pin2, S7 uses Digital Pin3. Once these enable jumpers have been applied, Pin 2 and 3 will be occupied (Figure 3). <a href="image:DFRduino_RoMeo4.png" title="wikilink">thumbSample</a> code：</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">int</span> ledPin = <span class="dv">13</span>;                <span class="dt">int</span> key_s6 = <span class="dv">2</span>;             <span class="dt">int</span> val=<span class="dv">0</span>;<span class="dt">void</span> setup(){  pinMode(ledPin, OUTPUT);      <span class="co">// Set Pin13 to output mode  pinMode(key_s6, INPUT);       // Set Pin12 to output mode}void loop(){   if(digitalRead(key_s6)==0)    //     {        while(!digitalRead(key_s6));        val++;     }   if(val==1)     { digitalWrite(ledPin, HIGH);   //      }   if(val==2)     {        val=0;        digitalWrite(ledPin, LOW);    //      }}</span></code></pre>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">//Sample 2://Code function: Press button S6, turn on LED, Press button S7, turn off LED.Sample code：int ledPin = 13;                // int key_s6 = 2;                 // int key_s7 = 3;                 // void setup(){  pinMode(ledPin, OUTPUT);      //   pinMode(key_s6, INPUT);       // pinMode(key_s7, INPUT);       // }void loop(){   if(digitalRead(key_s6)==0)    //     {         digitalWrite(ledPin, HIGH);   //      }   if(digitalRead(key_s7)==0)   //     {         digitalWrite(ledPin, LOW);    //      }}</span></code></pre>
<p>==Dual DC Motor Speed Control=====Hardware Setting===Connect four motor wires to Motor Terminal. And apply power through motor power terminal (Figure 4).<a href="image:DFRduino_RoMeo5.png" title="wikilink">thumb</a>===Pin Allocation==={|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;center&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|+ &quot;PWM Mode&quot;!style=&quot;background:#7dc2f5&quot;|Pin!style=&quot;background:#7dc2f5&quot;|Function|-|align=&quot;center&quot;|Digital 4|align=&quot;center&quot;|Motor 1 Direction control|-|align=&quot;center&quot;|Digital 5|align=&quot;center&quot;|Motor 1 PWM control|-|align=&quot;center&quot;|Digital 6|align=&quot;center&quot;|Motor 2 PWM control|-|align=&quot;center&quot;|Digital 7|align=&quot;center&quot;|Motor 2 Direction control|}<br />{|border=&quot;1&quot; cellspacing=&quot;0&quot; align=&quot;center&quot; cellpadding=&quot;5&quot; width=&quot;400px&quot;|+ &quot;PLL Mode&quot;!style=&quot;background:#7dc2f5&quot;|Pin!style=&quot;background:#7dc2f5&quot;|Function|-|align=&quot;center&quot;|Digital 4|align=&quot;center&quot;|Motor 1 Enable control|-|align=&quot;center&quot;|Digital 5|align=&quot;center&quot;|Motor 1 Direction control|-|align=&quot;center&quot;|Digital 6|align=&quot;center&quot;|Motor 2 Direction control|-|align=&quot;center&quot;|Digital 7|align=&quot;center&quot;|Motor 2 Enable control |}===PWM Control Mode===<a href="image:DFRduino_RoMeo6.png" title="wikilink">thumbThe</a> PWM DC motor control is implemented by manipulating two digital IO pins and two PWM pins. As illustrated in the diagram above (Figure 5), Pin 4,7 (7,8 for old Romeo version) are motor direction control pins, Pin 5,6 (6,9 for old Romeo version) are motor speed control pins.<em>For previous Romeo board, the pins used to control the motor is Pin 7,8 (Direction), Pin 6,9 (Speed). You can find the information at the right side of the Motor Control Pin Jumpers.</em>Sample Code：</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">//Standard PWM DC controlint E1 = 5;     //M1 Speed Controlint E2 = 6;     //M2 Speed Controlint M1 = 4;    //M1 Direction Controlint M2 = 7;    //M1 Direction Control///For previous Romeo, please use these pins.//int E1 = 6;     //M1 Speed Control//int E2 = 9;     //M2 Speed Control//int M1 = 7;    //M1 Direction Control//int M2 = 8;    //M1 Direction Controlvoid stop(void)                    //Stop{  digitalWrite(E1,LOW);     digitalWrite(E2,LOW);      }   void advance(char a,char b)          //Move forward{  analogWrite (E1,a);      //PWM Speed Control  digitalWrite(M1,HIGH);      analogWrite (E2,b);      digitalWrite(M2,HIGH);}  void back_off (char a,char b)          //Move backward{  analogWrite (E1,a);  digitalWrite(M1,LOW);     analogWrite (E2,b);      digitalWrite(M2,LOW);}void turn_L (char a,char b)             //Turn Left{  analogWrite (E1,a);  digitalWrite(M1,LOW);      analogWrite (E2,b);      digitalWrite(M2,HIGH);}void turn_R (char a,char b)             //Turn Right{  analogWrite (E1,a);  digitalWrite(M1,HIGH);      analogWrite (E2,b);      digitalWrite(M2,LOW);}void setup(void) {   int i;  for(i=4;i&lt;=7;i++)    pinMode(i, OUTPUT);    Serial.begin(19200);      //Set Baud Rate  Serial.println(&quot;Run keyboard control&quot;);} void loop(void) {  if(Serial.available()){    char val = Serial.read();    if(val != -1)    {      switch(val)      {      case &#39;w&#39;://Move Forward        advance (255,255);   //move forward in max speed        break;      case &#39;s&#39;://Move Backward        back_off (255,255);   //move back in max speed        break;      case &#39;a&#39;://Turn Left        turn_L (100,100);        break;             case &#39;d&#39;://Turn Right        turn_R (100,100);        break;      case &#39;z&#39;:        Serial.println(&quot;Hello&quot;);        break;      case &#39;x&#39;:        stop();        break;      }    }    else stop();    }}</span></code></pre>
<p>===PLL Control Mode===The Romeo also support PLL<a href="Phase_locked_loop" title="wikilink">Phase locked loop</a> control mode.![fig:Romeo_pll.jpg](https://github.com/DFRobot/DFRobotDocument/DFRduino_Romeo-All_in_one_Controller_(SKU:DFR0004)/image/Romeo_pll.jpg  "Romeo_pll.jpg")Sample Code：</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">//Standard DLL Speed controlint E1 = 4;     //M1 Speed Controlint E2 = 7;     //M2 Speed Controlint M1 = 5;    //M1 Direction Controlint M2 = 6;    //M1 Direction Control///For previous Romeo, please use these pins.//int E1 = 6;     //M1 Speed Control//int E2 = 9;     //M2 Speed Control//int M1 = 7;    //M1 Direction Control//int M2 = 8;    //M1 Direction Control//When m1p/m2p is 127, it stops the motor//when m1p/m2p is 255, it gives the maximum speed for one direction//When m1p/m2p is 0, it gives the maximum speed for reverse directionvoid DriveMotorP(byte m1p, byte m2p)//Drive Motor Power Mode{  digitalWrite(E1, HIGH);  analogWrite(M1, (m1p));   digitalWrite(E2, HIGH);  analogWrite(M2, (m2p)); }void setup(void) {   int i;  for(i=6;i&lt;=9;i++)    pinMode(i, OUTPUT);    Serial.begin(19200);      //Set Baud Rate} void loop(void) {   if(Serial.available()){    char val = Serial.read();    if(val!=-1)    {      switch(val)      {      case &#39;w&#39;://Move Forward        DriveMotorP(0xff,0xff); // Max speed        break;      case &#39;x&#39;://Move Backward        DriveMotorP(0x00,0x00);        ; // Max speed        break;      case &#39;s&#39;://Stop        DriveMotorP(0x7f,0x7f);        break;             }    }  }}</span></code></pre>
<p>==Schematics==*<a href="http://www.dfrobot.com/wiki/images/a/a0/RoMeo_Schematic.png">Romeo Schematic V0.9</a><br />*<a href="http://www.dfrobot.com/image/data/DFR0004/RoMeo_Schematic_V1.pdf">Romeo Schematic V1.0</a><br /><br /><a href="image:nextredirectltr.png" title="wikilink">image:nextredirectltr.pngGo</a> Shopping <a href="https://www.dfrobot.com/product-56.html">Romeo-All in one Controller (Arduino Compatible Atmega 328) (SKU:DFR0004)</a>Category: <a href="https://www.dfrobot.com/">Home</a> &gt; <a href="https://www.dfrobot.com/category-35.html">Arduino</a> &gt; <a href="https://www.dfrobot.com/category-104.html">Microcontroller</a><a href="category:_Product_Manual" title="wikilink">category: Product Manual</a><a href="category:_DFR_Series" title="wikilink">category: DFR Series</a><a href="category:_Motor_Controllers" title="wikilink">category: Motor Controllers</a><a href="category:_MicroControllers" title="wikilink">category: MicroControllers</a><a href="category:_source" title="wikilink">category: source</a></p>---
title: DFRduino Romeo-All in one Controller (SKU:DFR0004)
permalink: /DFRduino_Romeo-All_in_one_Controller_(SKU:DFR0004)/
---

